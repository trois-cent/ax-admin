'use client'

import { usePathname } from 'next/navigation'
import './gradient-bg.scss'
import gsap from 'gsap'
import { useEffect } from 'react'

const positions = [
    {
        path: '/',
        blob1: {
            x: 0,
            y: 0,
            scale: 1,
        },
        blob2: {
            x: 0,
            y: 0,
            scale: 1,
        },
    },
    {
        path: '/auth',
        blob1: {
            x: '-5vw',
            y: '5vh',
            scale: 1.2,
        },
        blob2: {
            x: '-5vw',
            y: '10vh',
            scale: 0.6,
        },
    },
    {
        path: '/organizations',
        blob1: {
            x: '-10vw',
            y: '25vh',
            scale: 1.1,
        },
        blob2: {
            x: '-6vw',
            y: '-20vh',
            scale: 0.8,
        },
    },
    {
        path: '/events',
        blob1: {
            x: '5vw',
            y: '35vh',
            scale: 0.9,
        },
        blob2: {
            x: '-15vw',
            y: '-25vh',
            scale: 1.2,
        },
    },
]

export const GradientBG = () => {
    const currentPath = usePathname()

    useEffect(() => {
        const transform = positions.find(pos => pos.path === currentPath) || positions[0]

        const tl = gsap
            .timeline({
                defaults: {
                    duration: 1.65,
                    ease: 'circ.out',
                },
            })
            .to('#blob-1', transform.blob1)
            .to('#blob-2', transform.blob2, '<')

        return () => {
            tl.kill()
        }
    }, [currentPath])

    return (
        <div className="moving-gradient-bg">
            <div className="inner">
                <div className="blob" id="blob-1">
                    <svg viewBox="0 0 761 774" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            opacity="0.75"
                            d="M554.152 456.235C386.152 446.235 413.761 521.234 423.152 557.235C441.152 626.235 304.485 673.234 265.652 680.734C251.486 655.068 221.952 625.534 217.152 712.734C212.352 799.934 97.819 645.401 41.1523 557.235C27.6521 500.068 0.651523 364.734 0.651523 280.734C0.651523 175.734 -11.3485 145.234 67.6515 183.734C146.652 222.234 91.6515 125.235 299.652 28.2351C466.052 -49.3649 538.652 51.2351 554.152 111.235C581.818 148.235 639.552 222.635 649.152 224.235C661.152 226.235 760.152 375.735 760.152 403.735C760.152 431.735 764.152 468.735 554.152 456.235Z"
                            fill="#F35D3A"
                        />
                        <path
                            opacity="0.75"
                            d="M546.086 598.547C441.771 592.332 458.914 638.943 464.746 661.317C475.922 704.2 391.062 733.41 366.95 738.071C358.154 722.12 339.816 703.765 336.835 757.959C333.855 812.153 262.738 716.112 227.552 661.317C219.17 625.789 202.405 541.68 202.405 489.474C202.405 424.218 194.953 405.262 244.006 429.19C293.06 453.117 258.909 392.833 388.061 332.548C491.383 284.32 536.462 346.842 546.086 384.132C563.265 407.127 599.113 453.366 605.074 454.36C612.525 455.603 673.997 548.517 673.997 565.918C673.997 583.32 676.48 606.315 546.086 598.547Z"
                            fill="#F3563A"
                        />
                    </svg>
                </div>
                <div className="blob" id="blob-2">
                    <svg width="635" height="644" viewBox="0 0 635 644" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            opacity="0.75"
                            d="M119.242 347.12C216.485 342.909 200.504 374.491 195.068 389.651C184.649 418.706 263.756 438.498 286.233 441.656C294.433 430.848 311.528 418.411 314.306 455.131C317.085 491.851 383.38 426.777 416.18 389.651C423.994 365.578 439.623 308.589 439.623 273.217C439.623 229.001 446.569 216.158 400.841 232.37C355.114 248.583 386.95 207.736 266.553 166.89C170.236 134.213 128.213 176.575 119.242 201.841C103.227 217.422 69.8098 248.751 64.253 249.425C57.3071 250.267 0.00311279 313.221 0.00311279 325.012C0.00311279 336.803 -2.31219 352.383 119.242 347.12Z"
                            fill="#F3A33A"
                        />
                        <path
                            opacity="0.75"
                            d="M314.242 192.12C411.485 187.909 395.504 219.491 390.068 234.651C379.649 263.706 458.756 283.498 481.233 286.656C489.433 275.848 506.528 263.411 509.306 300.131C512.085 336.851 578.38 271.777 611.18 234.651C618.994 210.578 634.623 153.589 634.623 118.217C634.623 74.0015 641.569 61.158 595.841 77.3702C550.114 93.5825 581.95 52.7363 461.553 11.8898C365.236 -20.7875 323.213 21.575 314.242 46.8409C298.227 62.4216 264.81 93.7513 259.253 94.425C252.307 95.2672 195.003 158.221 195.003 170.012C195.003 181.803 192.688 197.383 314.242 192.12Z"
                            fill="#F33A3A"
                        />
                        <path
                            opacity="0.75"
                            d="M314.242 362.12C411.485 357.909 395.504 389.491 390.068 404.651C379.649 433.706 458.756 453.498 481.233 456.656C489.433 445.848 506.528 433.411 509.306 470.131C512.085 506.851 578.38 441.777 611.18 404.651C618.994 380.578 634.623 323.589 634.623 288.217C634.623 244.001 641.569 231.158 595.841 247.37C550.114 263.583 581.95 222.736 461.553 181.89C365.236 149.213 323.213 191.575 314.242 216.841C298.227 232.422 264.81 263.751 259.253 264.425C252.307 265.267 195.003 328.221 195.003 340.012C195.003 351.803 192.688 367.383 314.242 362.12Z"
                            fill="#F33A3A"
                        />
                        <path
                            opacity="0.75"
                            d="M461.181 414.198C344.71 419.235 363.851 381.458 370.362 363.325C382.841 328.57 288.093 304.896 261.171 301.119C251.349 314.047 230.875 328.923 227.547 285.001C224.219 241.078 144.816 318.916 105.53 363.325C96.1706 392.119 77.4517 460.286 77.4517 502.596C77.4517 555.484 69.1323 570.846 123.901 551.454C178.67 532.062 140.54 580.92 284.742 629.778C400.103 668.865 450.435 618.193 461.181 587.972C480.362 569.335 520.387 531.86 527.042 531.054C535.362 530.047 603.996 454.745 603.996 440.641C603.996 426.538 606.769 407.901 461.181 414.198Z"
                            fill="#F35D3A"
                        />
                    </svg>
                </div>
                <div className="overlay" />
            </div>
        </div>
    )
}
